{% extends 'app/base.html' %}
{% block title %}
Result - Match Techniques -
{% endblock %}

{% block content %}
<div class="container">
    <nav>
        <div class="nav nav-tabs row border-0" role="tablist">
            <div class="col">
                <button class="nav-link active w-100" id="nav-list-tab" data-bs-toggle="tab" data-bs-target="#nav-list"
                    type="button" role="tab" aria-controls="nav-list" aria-selected="true">
                    List
                </button>
            </div>
            <div class="col">
                <button class="nav-link w-100" id="nav-matrix-tab" data-bs-toggle="tab" data-bs-target="#nav-matrix" type="button"
                    role="tab" aria-controls="nav-matrix" aria-selected="false">
                    Matrix
                </button>
            </div>
        </div>
    </nav>
    <div class="tab-content" id="nav-tab2">
        <div class="tab-pane fade show active" id="nav-list" role="tabpanel" aria-labelledby="nav-list-tab">
            <div id="result" class="card mb-3">
                <div class="card-body">
                    <div class="accordion">
                        {% for technique in techniques %}
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="heading{{ technique.id }}">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapse{{ technique.id }}" aria-expanded="true"
                                    aria-controls="collapse{{ technique.id }}">
                                    <h5 class="mb-0">
                                        <span class="badge bg-secondary me-3">{{ technique.external_id }}</span>
                                        {{ technique.name }}
                                    </h5>
                                </button>
                            </h2>
                            <div id="collapse{{ technique.id }}" class="accordion-collapse collapse"
                                aria-labelledby="heading{{ technique.id }}"
                                data-bs-parent="#accordion{{ technique.id }}">
                                <div class="accordion-body">
                                    <div>
                                        <h5>Description from MITRE</h5>
                                        <p>{{ technique.description }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="nav-matrix" role="tabpanel" aria-labelledby="nav-matrix-tab">
            <div id="matrix" class="mb-3 card">
                <div class="card-body">
                    <div class="card">
                        {% include "app/matrix.html" %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    // 特定のClass要素をすべて取得する
    const myElements = document.querySelectorAll("{{ t_external_id }}");

    // 背景色を変更する
    myElements.forEach(element => {
        element.style.backgroundColor = "#dc3545"; // 赤色に変更する場合
    });
</script>
{% endblock content %}